// Ğ¢ĞµÑÑ‚Ñ‹ Ğ´Ğ»Ñ Ğ¡ÑƒÑ‚ÑƒĞ½ĞºĞ¸

const { calculateMetal } = require('./src/calculator');
const metalDatabase = require('./docs/database/metals.json');

console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
console.log('ğŸ§ª Ğ¢Ğ•Ğ¡Ğ¢Ğ« Ğ”Ğ›Ğ¯ Ğ¡Ğ£Ğ¢Ğ£ĞĞšĞ˜');
console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n');

// Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
function testSytynka(testName, size, length, steelType, expected) {
  console.log(`ğŸ“‹ ${testName}`);
  console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n');

  const params = {
    metalType: 'sytynka',
    size,
    length,
    steelType
  };

  const result = calculateMetal(params, metalDatabase);

  // ĞÑ‚Ğ»Ğ°Ğ´ĞºĞ°
  if (!result.success) {
    console.log('âŒ ĞĞ¨Ğ˜Ğ‘ĞšĞ:', result.error);
    console.log('   ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:', params);
  }

  // ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ¿Ğ»Ğ¾Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ ÑÑ‚Ğ°Ğ»Ğ¸ Ğ¸Ğ· Ğ±Ğ°Ğ·Ñ‹
  const metal = metalDatabase.metals.sytynka;
  const steelDensity = metal.steelDensities[steelType];

  console.log('ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:');
  console.log(`  Ğ Ğ°Ğ·Ğ¼ĞµÑ€: ${size}`);
  console.log(`  ĞšĞ¾ÑÑ„Ñ„Ğ¸Ñ†Ğ¸ĞµĞ½Ñ‚: ${expected.coefficient} ĞºĞ³/Ğ¼ (Ğ´Ğ»Ñ ÑÑ‚3)`);
  console.log(`  Ğ”Ğ»Ğ¸Ğ½Ğ°: ${length} Ğ¼`);
  console.log(`  ĞœĞ°Ñ€ĞºĞ° ÑÑ‚Ğ°Ğ»Ğ¸: ${steelType}`);
  console.log(`  ĞŸĞ»Ğ¾Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ ÑÑ‚Ğ°Ğ»Ğ¸: ${steelDensity} Ñ‚/Ğ¼Â³`);
  console.log();

  console.log('Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:');
  console.log(`  weightPerMeter (Ğ²ĞµÑ 1 Ğ¼): ${result.weightPerMeter} ĞºĞ³`);
  console.log(`  weight (Ğ²ĞµÑ): ${result.weight} Ñ‚\n`);

  console.log('Ğ Ğ°ÑÑ‡Ñ‘Ñ‚:');
  console.log(`  Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ°: Ğ²ĞµÑ (Ñ‚) = ĞºĞ¾ÑÑ„Ñ„Ğ¸Ñ†Ğ¸ĞµĞ½Ñ‚ Ã— Ğ´Ğ»Ğ¸Ğ½Ğ° Ã— Ğ¿Ğ»Ğ¾Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ_ÑÑ‚Ğ°Ğ»Ğ¸ / 1000`);
  console.log(`  Ğ²ĞµÑ = ${expected.coefficient} Ã— ${length} Ã— ${steelDensity} / 1000 = ${expected.weight} Ñ‚\n`);

  const diff = Math.abs(result.weight - expected.weight);

  console.log(`ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚ÑÑ: ~${expected.weight} Ñ‚`);
  console.log(`ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¾: ${result.weight} Ñ‚`);
  console.log(`ğŸ“Š Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: ${diff < 0.01 ? 'âœ… PASSED' : 'âŒ FAILED'}\n`);

  return diff < 0.01;
}

// ============================================================================
// Ğ¢Ğ•Ğ¡Ğ¢ 1: Ğ Ğ°Ğ·Ğ¼ĞµÑ€ 60Ã—500, Ğ´Ğ»Ğ¸Ğ½Ğ° 10 Ğ¼, ÑÑ‚Ğ°Ğ»ÑŒ ÑÑ‚3
// ============================================================================

const test1 = testSytynka(
  'Ğ¢Ğ•Ğ¡Ğ¢ 1: Ğ Ğ°Ğ·Ğ¼ĞµÑ€ 60Ã—500, Ğ´Ğ»Ğ¸Ğ½Ğ° 10 Ğ¼, ÑÑ‚Ğ°Ğ»ÑŒ ÑÑ‚3',
  '60Ñ…500',
  10,
  'ÑÑ‚3',
  {
    coefficient: 30,
    weight: 2.355  // 30 Ã— 10 Ã— 7.85 / 1000 = 2.355
  }
);

// ============================================================================
// Ğ¢Ğ•Ğ¡Ğ¢ 2: Ğ Ğ°Ğ·Ğ¼ĞµÑ€ 60Ã—500, Ğ´Ğ»Ğ¸Ğ½Ğ° 100 Ğ¼, ÑÑ‚Ğ°Ğ»ÑŒ ÑÑ‚3
// ============================================================================

const test2 = testSytynka(
  'Ğ¢Ğ•Ğ¡Ğ¢ 2: Ğ Ğ°Ğ·Ğ¼ĞµÑ€ 60Ã—500, Ğ´Ğ»Ğ¸Ğ½Ğ° 100 Ğ¼, ÑÑ‚Ğ°Ğ»ÑŒ ÑÑ‚3',
  '60Ñ…500',
  100,
  'ÑÑ‚3',
  {
    coefficient: 30,
    weight: 23.55  // 30 Ã— 100 Ã— 7.85 / 1000 = 23.55
  }
);

// ============================================================================
// Ğ¢Ğ•Ğ¡Ğ¢ 3: Ğ Ğ°Ğ·Ğ¼ĞµÑ€ 60Ã—500, Ğ´Ğ»Ğ¸Ğ½Ğ° 50 Ğ¼, ÑÑ‚Ğ°Ğ»ÑŒ 09Ğ“2Ğ¡
// ============================================================================

const test3 = testSytynka(
  'Ğ¢Ğ•Ğ¡Ğ¢ 3: Ğ Ğ°Ğ·Ğ¼ĞµÑ€ 60Ã—500, Ğ´Ğ»Ğ¸Ğ½Ğ° 50 Ğ¼, ÑÑ‚Ğ°Ğ»ÑŒ 09Ğ“2Ğ¡',
  '60Ñ…500',
  50,
  '09Ğ“2Ğ¡',
  {
    coefficient: 30,
    weight: 11.775  // 30 Ã— 50 Ã— 7.85 / 1000 = 11.775
  }
);

// ============================================================================
// Ğ¢Ğ•Ğ¡Ğ¢ 4: Ğ Ğ°Ğ·Ğ¼ĞµÑ€ 60Ã—500, Ğ´Ğ»Ğ¸Ğ½Ğ° 20 Ğ¼, ÑÑ‚Ğ°Ğ»ÑŒ 12Ğ¥Ğœ
// ============================================================================

const test4 = testSytynka(
  'Ğ¢Ğ•Ğ¡Ğ¢ 4: Ğ Ğ°Ğ·Ğ¼ĞµÑ€ 60Ã—500, Ğ´Ğ»Ğ¸Ğ½Ğ° 20 Ğ¼, ÑÑ‚Ğ°Ğ»ÑŒ 12Ğ¥Ğœ',
  '60Ñ…500',
  20,
  '12Ğ¥Ğœ',
  {
    coefficient: 30,
    weight: 4.71  // 30 Ã— 20 Ã— 7.85 / 1000 = 4.71
  }
);

// ============================================================================
// Ğ¢Ğ•Ğ¡Ğ¢ 5: Ğ Ğ°Ğ·Ğ¼ĞµÑ€ 60Ã—500, Ğ´Ğ»Ğ¸Ğ½Ğ° 15 Ğ¼, ÑÑ‚Ğ°Ğ»ÑŒ 40Ğ¥
// ============================================================================

const test5 = testSytynka(
  'Ğ¢Ğ•Ğ¡Ğ¢ 5: Ğ Ğ°Ğ·Ğ¼ĞµÑ€ 60Ã—500, Ğ´Ğ»Ğ¸Ğ½Ğ° 15 Ğ¼, ÑÑ‚Ğ°Ğ»ÑŒ 40Ğ¥',
  '60Ñ…500',
  15,
  '40Ğ¥',
  {
    coefficient: 30,
    weight: 3.5325  // 30 Ã— 15 Ã— 7.85 / 1000 = 3.5325
  }
);

// ============================================================================
// Ğ˜Ğ¢ĞĞ“Ğ˜
// ============================================================================

console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
console.log('ğŸ“Š Ğ˜Ğ¢ĞĞ“Ğ˜ Ğ¢Ğ•Ğ¡Ğ¢Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ¯');
console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n');

const allPassed = test1 && test2 && test3 && test4 && test5;

if (allPassed) {
  console.log('âœ… Ğ’Ğ¡Ğ• Ğ¢Ğ•Ğ¡Ğ¢Ğ« ĞŸĞ ĞĞ™Ğ”Ğ•ĞĞ« Ğ£Ğ¡ĞŸĞ•Ğ¨ĞĞ!\n');
  console.log('ğŸ‰ Ğ¡ÑƒÑ‚ÑƒĞ½ĞºĞ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾:');
  console.log('   1. Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚: Ğ²ĞµÑ (Ñ‚) = ĞºĞ¾ÑÑ„Ñ„Ğ¸Ñ†Ğ¸ĞµĞ½Ñ‚ Ã— Ğ´Ğ»Ğ¸Ğ½Ğ° Ã— Ğ¿Ğ»Ğ¾Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ_ÑÑ‚Ğ°Ğ»Ğ¸ / 1000');
  console.log('   2. ĞœĞ°Ñ€ĞºĞ¸ ÑÑ‚Ğ°Ğ»Ğ¸ ÑƒÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾ (137 Ğ¼Ğ°Ñ€Ğ¾Ğº)');
  console.log('   3. ĞšĞ¾ÑÑ„Ñ„Ğ¸Ñ†Ğ¸ĞµĞ½Ñ‚ 30 ĞºĞ³/Ğ¼ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ÑĞµÑ‚ÑÑ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾');
  console.log('   4. Ğ Ğ°ÑÑ‡Ñ‘Ñ‚Ñ‹ Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… Ğ¼Ğ°Ñ€Ğ¾Ğº ÑÑ‚Ğ°Ğ»Ğ¸ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‚');
  console.log('   5. Ğ Ğ°Ğ·Ğ¼ĞµÑ€ 60Ã—500 Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾\n');
  console.log('âœ… Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾!');
  console.log('\nğŸ“Š Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°:');
  console.log('   Ğ Ğ°Ğ·Ğ¼ĞµÑ€Ğ¾Ğ² Ğ² Ğ±Ğ°Ğ·Ğµ: 1 (60Ã—500)');
  console.log('   ĞœĞ°Ñ€Ğ¾Ğº ÑÑ‚Ğ°Ğ»Ğ¸: 137');
  console.log('   ĞšĞ¾ÑÑ„Ñ„Ğ¸Ñ†Ğ¸ĞµĞ½Ñ‚: 30 ĞºĞ³/Ğ¼ (Ğ´Ğ»Ñ ÑÑ‚3)');
  console.log('   Ğ“ĞĞ¡Ğ¢: Ğ“ĞĞ¡Ğ¢');
} else {
  console.log('âŒ ĞĞ•ĞšĞĞ¢ĞĞ Ğ«Ğ• Ğ¢Ğ•Ğ¡Ğ¢Ğ« ĞĞ• ĞŸĞ ĞĞ¨Ğ›Ğ˜!\n');
  console.log(`Ğ¢ĞµÑÑ‚ 1: ${test1 ? 'âœ…' : 'âŒ'}`);
  console.log(`Ğ¢ĞµÑÑ‚ 2: ${test2 ? 'âœ…' : 'âŒ'}`);
  console.log(`Ğ¢ĞµÑÑ‚ 3: ${test3 ? 'âœ…' : 'âŒ'}`);
  console.log(`Ğ¢ĞµÑÑ‚ 4: ${test4 ? 'âœ…' : 'âŒ'}`);
  console.log(`Ğ¢ĞµÑÑ‚ 5: ${test5 ? 'âœ…' : 'âŒ'}`);
}

console.log('\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
