#!/usr/bin/env node
/**
 * Ğ¢Ğ•Ğ¡Ğ¢Ğ« Ğ”Ğ›Ğ¯ Ğ›Ğ˜Ğ¡Ğ¢Ğ Ğ Ğ˜Ğ¤Ğ›Ğ•ĞĞĞ“Ğ
 *
 * ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ° Ğ²ĞµÑĞ° Ñ ÑƒÑ‡Ñ‘Ñ‚Ğ¾Ğ¼:
 * - Ğ¢Ğ¾Ğ»Ñ‰Ğ¸Ğ½Ñ‹ Ğ»Ğ¸ÑÑ‚Ğ° (2.5-12 Ğ¼Ğ¼)
 * - Ğ¢Ğ¸Ğ¿Ğ° Ñ€Ğ¸Ñ„Ğ»ĞµĞ½Ğ¸Ñ (Ñ‡ĞµÑ‡ĞµĞ²Ğ¸Ñ†Ğ°, Ñ€Ğ¾Ğ¼Ğ±)
 */

const { calculateMetal } = require('./src/calculator.js');
const metalDatabase = require('./docs/database/metals.json');

console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
console.log('ğŸ§ª Ğ¢Ğ•Ğ¡Ğ¢Ğ« Ğ”Ğ›Ğ¯ Ğ›Ğ˜Ğ¡Ğ¢Ğ Ğ Ğ˜Ğ¤Ğ›Ğ•ĞĞĞ“Ğ');
console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n');

// =============================================================================
// Ğ¢Ğ•Ğ¡Ğ¢ 1: Ğ›Ğ¸ÑÑ‚ Ñ€Ğ¸Ñ„Ğ»ĞµĞ½Ñ‹Ğ¹ 5 Ğ¼Ğ¼, Ñ‡ĞµÑ‡ĞµĞ²Ğ¸Ñ†Ğ°, 10 Ğ¼Â²
// ĞĞ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ñ‹Ğ¹ Ğ²ĞµÑ: 40.5 ĞºĞ³/Ğ¼Â² Ã— 10 Ğ¼Â² / 1000 = 0.405 Ñ‚
// =============================================================================
console.log('ğŸ“‹ Ğ¢Ğ•Ğ¡Ğ¢ 1: Ğ›Ğ¸ÑÑ‚ Ñ€Ğ¸Ñ„Ğ»ĞµĞ½Ñ‹Ğ¹ 5 Ğ¼Ğ¼, Ñ‡ĞµÑ‡ĞµĞ²Ğ¸Ñ†Ğ°, 10 Ğ¼Â²');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n');

const test1 = calculateMetal({
  metalType: 'sheet_checkered',
  size: '5',
  riffleType: 'Ñ‡ĞµÑ‡ĞµĞ²Ğ¸Ñ†Ğ°',
  area: 10
}, metalDatabase);

console.log('ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:');
console.log('  Ğ¢Ğ¾Ğ»Ñ‰Ğ¸Ğ½Ğ°: 5 Ğ¼Ğ¼');
console.log('  Ğ¢Ğ¸Ğ¿ Ñ€Ğ¸Ñ„Ğ»ĞµĞ½Ğ¸Ñ: Ñ‡ĞµÑ‡ĞµĞ²Ğ¸Ñ†Ğ°');
console.log('  ĞŸĞ»Ğ¾Ñ‰Ğ°Ğ´ÑŒ: 10 Ğ¼Â²');
console.log('  Ğ’ĞµÑ 1 Ğ¼Â²: 40.5 ĞºĞ³');
console.log();
console.log(`Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: ${test1.weight.toFixed(3)} Ñ‚`);
console.log(`ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚ÑÑ: 0.405 Ñ‚`);

const test1Expected = 0.405;
const test1Diff = Math.abs(test1.weight - test1Expected);
const test1Passed = test1Diff < 0.001;

console.log(`ğŸ“Š Ğ Ğ°Ğ·Ğ½Ğ¸Ñ†Ğ°: ${(test1Diff * 1000).toFixed(1)} ĞºĞ³`);
console.log(`   Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: ${test1Passed ? 'âœ… PASSED' : 'âŒ FAILED'}`);
console.log();

// =============================================================================
// Ğ¢Ğ•Ğ¡Ğ¢ 2: Ğ›Ğ¸ÑÑ‚ Ñ€Ğ¸Ñ„Ğ»ĞµĞ½Ñ‹Ğ¹ 5 Ğ¼Ğ¼, Ñ€Ğ¾Ğ¼Ğ±, 10 Ğ¼Â²
// ĞĞ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ñ‹Ğ¹ Ğ²ĞµÑ: 41.8 ĞºĞ³/Ğ¼Â² Ã— 10 Ğ¼Â² / 1000 = 0.418 Ñ‚
// =============================================================================
console.log('ğŸ“‹ Ğ¢Ğ•Ğ¡Ğ¢ 2: Ğ›Ğ¸ÑÑ‚ Ñ€Ğ¸Ñ„Ğ»ĞµĞ½Ñ‹Ğ¹ 5 Ğ¼Ğ¼, Ñ€Ğ¾Ğ¼Ğ±, 10 Ğ¼Â²');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n');

const test2 = calculateMetal({
  metalType: 'sheet_checkered',
  size: '5',
  riffleType: 'Ñ€Ğ¾Ğ¼Ğ±',
  area: 10
}, metalDatabase);

console.log('ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:');
console.log('  Ğ¢Ğ¾Ğ»Ñ‰Ğ¸Ğ½Ğ°: 5 Ğ¼Ğ¼');
console.log('  Ğ¢Ğ¸Ğ¿ Ñ€Ğ¸Ñ„Ğ»ĞµĞ½Ğ¸Ñ: Ñ€Ğ¾Ğ¼Ğ±');
console.log('  ĞŸĞ»Ğ¾Ñ‰Ğ°Ğ´ÑŒ: 10 Ğ¼Â²');
console.log('  Ğ’ĞµÑ 1 Ğ¼Â²: 41.8 ĞºĞ³');
console.log();
console.log(`Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: ${test2.weight.toFixed(3)} Ñ‚`);
console.log(`ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚ÑÑ: 0.418 Ñ‚`);

const test2Expected = 0.418;
const test2Diff = Math.abs(test2.weight - test2Expected);
const test2Passed = test2Diff < 0.001;

console.log(`ğŸ“Š Ğ Ğ°Ğ·Ğ½Ğ¸Ñ†Ğ°: ${(test2Diff * 1000).toFixed(1)} ĞºĞ³`);
console.log(`   Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: ${test2Passed ? 'âœ… PASSED' : 'âŒ FAILED'}`);

// ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ñ€Ğ°Ğ·Ğ½Ğ¸Ñ†Ñƒ Ğ¼ĞµĞ¶Ğ´Ñƒ Ñ‡ĞµÑ‡ĞµĞ²Ğ¸Ñ†ĞµĞ¹ Ğ¸ Ñ€Ğ¾Ğ¼Ğ±Ğ¾Ğ¼
const differenceBetweenTypes = test2.weight - test1.weight;
console.log(`\nğŸ“Š Ğ Ğ°Ğ·Ğ½Ğ¸Ñ†Ğ° Ñ€Ğ¾Ğ¼Ğ± - Ñ‡ĞµÑ‡ĞµĞ²Ğ¸Ñ†Ğ°: ${(differenceBetweenTypes * 1000).toFixed(1)} ĞºĞ³`);
console.log(`   ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚ÑÑ: ~13 ĞºĞ³ (Ñ€Ğ¾Ğ¼Ğ± Ñ‚ÑĞ¶ĞµĞ»ĞµĞµ)`);
console.log(`   Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: ${Math.abs(differenceBetweenTypes * 1000 - 13) < 1 ? 'âœ… PASSED' : 'âŒ FAILED'}`);
console.log();

// =============================================================================
// Ğ¢Ğ•Ğ¡Ğ¢ 3: Ğ›Ğ¸ÑÑ‚ Ñ€Ğ¸Ñ„Ğ»ĞµĞ½Ñ‹Ğ¹ 12 Ğ¼Ğ¼, Ñ€Ğ¾Ğ¼Ğ±, 5 Ğ¼Â²
// ĞĞ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ñ‹Ğ¹ Ğ²ĞµÑ: 99.3 ĞºĞ³/Ğ¼Â² Ã— 5 Ğ¼Â² / 1000 = 0.497 Ñ‚
// =============================================================================
console.log('ğŸ“‹ Ğ¢Ğ•Ğ¡Ğ¢ 3: Ğ›Ğ¸ÑÑ‚ Ñ€Ğ¸Ñ„Ğ»ĞµĞ½Ñ‹Ğ¹ 12 Ğ¼Ğ¼, Ñ€Ğ¾Ğ¼Ğ±, 5 Ğ¼Â²');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n');

const test3 = calculateMetal({
  metalType: 'sheet_checkered',
  size: '12',
  riffleType: 'Ñ€Ğ¾Ğ¼Ğ±',
  area: 5
}, metalDatabase);

console.log('ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:');
console.log('  Ğ¢Ğ¾Ğ»Ñ‰Ğ¸Ğ½Ğ°: 12 Ğ¼Ğ¼');
console.log('  Ğ¢Ğ¸Ğ¿ Ñ€Ğ¸Ñ„Ğ»ĞµĞ½Ğ¸Ñ: Ñ€Ğ¾Ğ¼Ğ±');
console.log('  ĞŸĞ»Ğ¾Ñ‰Ğ°Ğ´ÑŒ: 5 Ğ¼Â²');
console.log('  Ğ’ĞµÑ 1 Ğ¼Â²: 99.3 ĞºĞ³');
console.log();
console.log(`Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: ${test3.weight.toFixed(3)} Ñ‚`);
console.log(`ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚ÑÑ: 0.497 Ñ‚`);

const test3Expected = 0.497;
const test3Diff = Math.abs(test3.weight - test3Expected);
const test3Passed = test3Diff < 0.001;

console.log(`ğŸ“Š Ğ Ğ°Ğ·Ğ½Ğ¸Ñ†Ğ°: ${(test3Diff * 1000).toFixed(1)} ĞºĞ³`);
console.log(`   Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: ${test3Passed ? 'âœ… PASSED' : 'âŒ FAILED'}`);
console.log();

// =============================================================================
// Ğ¢Ğ•Ğ¡Ğ¢ 4: Ğ›Ğ¸ÑÑ‚ Ñ€Ğ¸Ñ„Ğ»ĞµĞ½Ñ‹Ğ¹ 2.5 Ğ¼Ğ¼, Ñ‡ĞµÑ‡ĞµĞ²Ğ¸Ñ†Ğ°, 20 Ğ¼Â²
// ĞĞ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ñ‹Ğ¹ Ğ²ĞµÑ: 20.1 ĞºĞ³/Ğ¼Â² Ã— 20 Ğ¼Â² / 1000 = 0.402 Ñ‚
// =============================================================================
console.log('ğŸ“‹ Ğ¢Ğ•Ğ¡Ğ¢ 4: Ğ›Ğ¸ÑÑ‚ Ñ€Ğ¸Ñ„Ğ»ĞµĞ½Ñ‹Ğ¹ 2.5 Ğ¼Ğ¼, Ñ‡ĞµÑ‡ĞµĞ²Ğ¸Ñ†Ğ°, 20 Ğ¼Â²');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n');

const test4 = calculateMetal({
  metalType: 'sheet_checkered',
  size: '2.5',
  riffleType: 'Ñ‡ĞµÑ‡ĞµĞ²Ğ¸Ñ†Ğ°',
  area: 20
}, metalDatabase);

console.log('ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:');
console.log('  Ğ¢Ğ¾Ğ»Ñ‰Ğ¸Ğ½Ğ°: 2.5 Ğ¼Ğ¼');
console.log('  Ğ¢Ğ¸Ğ¿ Ñ€Ğ¸Ñ„Ğ»ĞµĞ½Ğ¸Ñ: Ñ‡ĞµÑ‡ĞµĞ²Ğ¸Ñ†Ğ°');
console.log('  ĞŸĞ»Ğ¾Ñ‰Ğ°Ğ´ÑŒ: 20 Ğ¼Â²');
console.log('  Ğ’ĞµÑ 1 Ğ¼Â²: 20.1 ĞºĞ³');
console.log();
console.log(`Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: ${test4.weight.toFixed(3)} Ñ‚`);
console.log(`ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚ÑÑ: 0.402 Ñ‚`);

const test4Expected = 0.402;
const test4Diff = Math.abs(test4.weight - test4Expected);
const test4Passed = test4Diff < 0.001;

console.log(`ğŸ“Š Ğ Ğ°Ğ·Ğ½Ğ¸Ñ†Ğ°: ${(test4Diff * 1000).toFixed(1)} ĞºĞ³`);
console.log(`   Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: ${test4Passed ? 'âœ… PASSED' : 'âŒ FAILED'}`);
console.log();

// =============================================================================
// Ğ¢Ğ•Ğ¡Ğ¢ 5: Ğ›Ğ¸ÑÑ‚ Ñ€Ğ¸Ñ„Ğ»ĞµĞ½Ñ‹Ğ¹ 8 Ğ¼Ğ¼, Ñ€Ğ¾Ğ¼Ğ±, 15 Ğ¼Â²
// ĞĞ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ñ‹Ğ¹ Ğ²ĞµÑ: 66.6 ĞºĞ³/Ğ¼Â² Ã— 15 Ğ¼Â² / 1000 = 0.999 Ñ‚
// =============================================================================
console.log('ğŸ“‹ Ğ¢Ğ•Ğ¡Ğ¢ 5: Ğ›Ğ¸ÑÑ‚ Ñ€Ğ¸Ñ„Ğ»ĞµĞ½Ñ‹Ğ¹ 8 Ğ¼Ğ¼, Ñ€Ğ¾Ğ¼Ğ±, 15 Ğ¼Â²');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n');

const test5 = calculateMetal({
  metalType: 'sheet_checkered',
  size: '8',
  riffleType: 'Ñ€Ğ¾Ğ¼Ğ±',
  area: 15
}, metalDatabase);

console.log('ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:');
console.log('  Ğ¢Ğ¾Ğ»Ñ‰Ğ¸Ğ½Ğ°: 8 Ğ¼Ğ¼');
console.log('  Ğ¢Ğ¸Ğ¿ Ñ€Ğ¸Ñ„Ğ»ĞµĞ½Ğ¸Ñ: Ñ€Ğ¾Ğ¼Ğ±');
console.log('  ĞŸĞ»Ğ¾Ñ‰Ğ°Ğ´ÑŒ: 15 Ğ¼Â²');
console.log('  Ğ’ĞµÑ 1 Ğ¼Â²: 66.6 ĞºĞ³');
console.log();
console.log(`Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: ${test5.weight.toFixed(3)} Ñ‚`);
console.log(`ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚ÑÑ: 0.999 Ñ‚`);

const test5Expected = 0.999;
const test5Diff = Math.abs(test5.weight - test5Expected);
const test5Passed = test5Diff < 0.001;

console.log(`ğŸ“Š Ğ Ğ°Ğ·Ğ½Ğ¸Ñ†Ğ°: ${(test5Diff * 1000).toFixed(1)} ĞºĞ³`);
console.log(`   Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: ${test5Passed ? 'âœ… PASSED' : 'âŒ FAILED'}`);
console.log();

// =============================================================================
// Ğ¢Ğ•Ğ¡Ğ¢ 6: ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ²ÑĞµÑ… Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ¾Ğ² Ñ Ñ‡ĞµÑ‡ĞµĞ²Ğ¸Ñ†ĞµĞ¹
// =============================================================================
console.log('ğŸ“‹ Ğ¢Ğ•Ğ¡Ğ¢ 6: ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ²ÑĞµÑ… Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ¾Ğ² Ñ Ñ‡ĞµÑ‡ĞµĞ²Ğ¸Ñ†ĞµĞ¹');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n');

const sizes = ['2.5', '3', '4', '5', '6', '8', '10', '12'];
const expectedWeights = {
  '2.5': 20.1,
  '3': 24.2,
  '4': 32.2,
  '5': 40.5,
  '6': 48.5,
  '8': 64.9,
  '10': 80.9,
  '12': 96.8
};

let allSizesPassed = true;

sizes.forEach(size => {
  const result = calculateMetal({
    metalType: 'sheet_checkered',
    size: size,
    riffleType: 'Ñ‡ĞµÑ‡ĞµĞ²Ğ¸Ñ†Ğ°',
    area: 1
  }, metalDatabase);

  // ĞĞ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ğ¾Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Ñ ÑƒÑ‡Ñ‘Ñ‚Ğ¾Ğ¼ Ğ¾ĞºÑ€ÑƒĞ³Ğ»ĞµĞ½Ğ¸Ñ Ğ´Ğ¾ 3 Ğ·Ğ½Ğ°ĞºĞ¾Ğ² Ğ¿Ğ¾ÑĞ»Ğµ Ğ·Ğ°Ğ¿ÑÑ‚Ğ¾Ğ¹
  const expectedRaw = expectedWeights[size] / 1000; // Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ¸Ğ¼ Ğ² Ñ‚Ğ¾Ğ½Ğ½Ñ‹
  const expected = Math.round(expectedRaw * 1000) / 1000; // Ğ¾ĞºÑ€ÑƒĞ³Ğ»ÑĞµĞ¼ ĞºĞ°Ğº Ğ² ĞºĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€Ğµ
  const diff = Math.abs(result.weight - expected);
  const passed = diff < 0.0001;

  if (!passed) allSizesPassed = false;

  console.log(`  ${size} Ğ¼Ğ¼: ${result.weight.toFixed(4)} Ñ‚ (Ğ¾Ğ¶Ğ¸Ğ´Ğ°ĞµÑ‚ÑÑ ${expected.toFixed(4)} Ñ‚) ${passed ? 'âœ…' : 'âŒ'}`);
});

console.log(`\nğŸ“Š Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: ${allSizesPassed ? 'âœ… PASSED - Ğ²ÑĞµ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ñ‹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‚ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾' : 'âŒ FAILED'}`);
console.log();

// =============================================================================
// Ğ¢Ğ•Ğ¡Ğ¢ 7: ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ²ÑĞµÑ… Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ¾Ğ² Ñ Ñ€Ğ¾Ğ¼Ğ±Ğ¾Ğ¼
// =============================================================================
console.log('ğŸ“‹ Ğ¢Ğ•Ğ¡Ğ¢ 7: ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ²ÑĞµÑ… Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ¾Ğ² Ñ Ñ€Ğ¾Ğ¼Ğ±Ğ¾Ğ¼');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n');

const expectedWeightsRomb = {
  '2.5': 21.0,
  '3': 25.1,
  '4': 33.5,
  '5': 41.8,
  '6': 50.0,
  '8': 66.6,
  '10': 83.0,
  '12': 99.3
};

let allRombSizesPassed = true;

sizes.forEach(size => {
  const result = calculateMetal({
    metalType: 'sheet_checkered',
    size: size,
    riffleType: 'Ñ€Ğ¾Ğ¼Ğ±',
    area: 1
  }, metalDatabase);

  // ĞĞ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ğ¾Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Ñ ÑƒÑ‡Ñ‘Ñ‚Ğ¾Ğ¼ Ğ¾ĞºÑ€ÑƒĞ³Ğ»ĞµĞ½Ğ¸Ñ Ğ´Ğ¾ 3 Ğ·Ğ½Ğ°ĞºĞ¾Ğ² Ğ¿Ğ¾ÑĞ»Ğµ Ğ·Ğ°Ğ¿ÑÑ‚Ğ¾Ğ¹
  const expectedRaw = expectedWeightsRomb[size] / 1000; // Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ¸Ğ¼ Ğ² Ñ‚Ğ¾Ğ½Ğ½Ñ‹
  const expected = Math.round(expectedRaw * 1000) / 1000; // Ğ¾ĞºÑ€ÑƒĞ³Ğ»ÑĞµĞ¼ ĞºĞ°Ğº Ğ² ĞºĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€Ğµ
  const diff = Math.abs(result.weight - expected);
  const passed = diff < 0.0001;

  if (!passed) allRombSizesPassed = false;

  console.log(`  ${size} Ğ¼Ğ¼: ${result.weight.toFixed(4)} Ñ‚ (Ğ¾Ğ¶Ğ¸Ğ´Ğ°ĞµÑ‚ÑÑ ${expected.toFixed(4)} Ñ‚) ${passed ? 'âœ…' : 'âŒ'}`);
});

console.log(`\nğŸ“Š Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: ${allRombSizesPassed ? 'âœ… PASSED - Ğ²ÑĞµ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ñ‹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‚ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾' : 'âŒ FAILED'}`);
console.log();

// =============================================================================
// Ğ˜Ğ¢ĞĞ“Ğ˜ Ğ¢Ğ•Ğ¡Ğ¢Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ¯
// =============================================================================
console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
console.log('ğŸ“Š Ğ˜Ğ¢ĞĞ“Ğ˜ Ğ¢Ğ•Ğ¡Ğ¢Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ¯');
console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n');

const allTestsPassed = test1Passed && test2Passed && test3Passed && test4Passed && test5Passed && allSizesPassed && allRombSizesPassed;

if (allTestsPassed) {
  console.log('âœ… Ğ’Ğ¡Ğ• Ğ¢Ğ•Ğ¡Ğ¢Ğ« ĞŸĞ ĞĞ™Ğ”Ğ•ĞĞ« Ğ£Ğ¡ĞŸĞ•Ğ¨ĞĞ!\n');
  console.log('ğŸ‰ Ğ›Ğ¸ÑÑ‚ Ñ€Ğ¸Ñ„Ğ»ĞµĞ½Ñ‹Ğ¹ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½:');
  console.log('   1. Ğ’ĞµÑ Ñ€Ğ°ÑÑÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ñ‚Ğ¾Ğ»Ñ‰Ğ¸Ğ½ (2.5-12 Ğ¼Ğ¼)');
  console.log('   2. Ğ¢Ğ¸Ğ¿ Ñ€Ğ¸Ñ„Ğ»ĞµĞ½Ğ¸Ñ (Ñ‡ĞµÑ‡ĞµĞ²Ğ¸Ñ†Ğ°/Ñ€Ğ¾Ğ¼Ğ±) Ğ²Ğ»Ğ¸ÑĞµÑ‚ Ğ½Ğ° Ğ²ĞµÑ');
  console.log('   3. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ°Ñ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ°: Ğ²ĞµÑ_1Ğ¼Â² Ã— Ğ¿Ğ»Ğ¾Ñ‰Ğ°Ğ´ÑŒ / 1000');
  console.log();
  console.log('âœ… Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾!');
} else {
  console.log('âŒ ĞĞ•ĞšĞĞ¢ĞĞ Ğ«Ğ• Ğ¢Ğ•Ğ¡Ğ¢Ğ« ĞĞ• ĞŸĞ ĞĞ¨Ğ›Ğ˜!\n');
  console.log('ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:');
  console.log('   - Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° riffleWeightsPerM2 Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ° Ğ±Ñ‹Ñ‚ÑŒ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾ Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ°');
  console.log('   - Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ° Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ° Ğ±Ñ‹Ñ‚ÑŒ: weightPerM2 Ã— area / 1000');
  console.log('   - ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ, Ñ‡Ñ‚Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¿Ğ¾Ğ»Ğµ Ğ¸Ğ· Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…');
}

console.log('\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');

// Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµĞ¼ ĞºĞ¾Ğ´ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ ĞµÑĞ»Ğ¸ Ñ‚ĞµÑÑ‚Ñ‹ Ğ½Ğµ Ğ¿Ñ€Ğ¾ÑˆĞ»Ğ¸
process.exit(allTestsPassed ? 0 : 1);
