// Ğ¢ĞµÑÑ‚Ñ‹ Ğ´Ğ»Ñ Ğ¨ĞµÑÑ‚Ğ¸Ğ³Ñ€Ğ°Ğ½Ğ½Ğ¸ĞºĞ°

const { calculateMetal } = require('./src/calculator');
const metalDatabase = require('./docs/database/metals.json');

console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
console.log('ğŸ§ª Ğ¢Ğ•Ğ¡Ğ¢Ğ« Ğ”Ğ›Ğ¯ Ğ¨Ğ•Ğ¡Ğ¢Ğ˜Ğ“Ğ ĞĞĞĞ˜ĞšĞ');
console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n');

// Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
function testShestigrannik(testName, size, length, steelType, expected) {
  console.log(`ğŸ“‹ ${testName}`);
  console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n');

  const params = {
    metalType: 'shestigrannik',
    size,
    length,
    steelType
  };

  const result = calculateMetal(params, metalDatabase);

  // ĞÑ‚Ğ»Ğ°Ğ´ĞºĞ°
  if (!result.success) {
    console.log('âŒ ĞĞ¨Ğ˜Ğ‘ĞšĞ:', result.error);
    console.log('   ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:', params);
    return false;
  }

  const metal = metalDatabase.metals.shestigrannik;
  const coefficient = metal.weights[size];
  const steelDensity = metal.steelDensities[steelType];

  console.log('ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:');
  console.log(`  Ğ¢Ğ¸Ğ¿: ${metal.name}`);
  console.log(`  Ğ Ğ°Ğ·Ğ¼ĞµÑ€: ${size}`);
  console.log(`  ĞšĞ¾ÑÑ„Ñ„Ğ¸Ñ†Ğ¸ĞµĞ½Ñ‚: ${coefficient}`);
  console.log(`  Ğ”Ğ»Ğ¸Ğ½Ğ°: ${length} Ğ¼`);
  console.log(`  ĞœĞ°Ñ€ĞºĞ° ÑÑ‚Ğ°Ğ»Ğ¸: ${steelType} (Ğ¿Ğ»Ğ¾Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ ${steelDensity})`);
  console.log();

  console.log('Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:');
  console.log(`  weightPerMeter (Ğ²ĞµÑ 1 Ğ¼): ${result.weightPerMeter} ĞºĞ³`);
  console.log(`  weight (Ğ²ĞµÑ): ${result.weight} Ñ‚\n`);

  console.log('Ğ Ğ°ÑÑ‡Ñ‘Ñ‚:');
  console.log(`  Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ°: Ğ²ĞµÑ (Ñ‚) = (ĞºĞ¾ÑÑ„Ñ„Ğ¸Ñ†Ğ¸ĞµĞ½Ñ‚ Ã— Ğ´Ğ»Ğ¸Ğ½Ğ° Ã— Ğ¿Ğ»Ğ¾Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ_ÑÑ‚Ğ°Ğ»Ğ¸) / 1000`);
  console.log(`  Ğ²ĞµÑ = (${coefficient} Ã— ${length} Ã— ${steelDensity}) / 1000 = ${expected.weight} Ñ‚`);
  console.log(`  âš ï¸ Ğ¡ Ã— Ğ¿Ğ»Ğ¾Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ_ÑÑ‚Ğ°Ğ»Ğ¸! (Ğ½Ğµ Ğ¿ÑƒÑ‚Ğ°Ñ‚ÑŒ ÑĞ¾ Ğ¨Ğ²ĞµĞ»Ğ»ĞµÑ€Ğ¾Ğ¼!)`);
  console.log();

  const diff = Math.abs(result.weight - expected.weight);

  console.log(`ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚ÑÑ: ~${expected.weight} Ñ‚`);
  console.log(`ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¾: ${result.weight} Ñ‚`);
  console.log(`ğŸ“Š Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: ${diff < 0.01 ? 'âœ… PASSED' : 'âŒ FAILED'}\n`);

  return diff < 0.01;
}

// ============================================================================
// Ğ¢Ğ•Ğ¡Ğ¢ 1: Ğ Ğ°Ğ·Ğ¼ĞµÑ€ 20, ÑÑ‚Ğ°Ğ»ÑŒ ÑÑ‚3
// ============================================================================
// ĞšĞ¾ÑÑ„Ñ„Ğ¸Ñ†Ğ¸ĞµĞ½Ñ‚: 0.346410161514
// ĞŸĞ»Ğ¾Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ ÑÑ‚Ğ°Ğ»Ğ¸ ÑÑ‚3: 7.85
// Ğ Ğ°ÑÑ‡Ñ‘Ñ‚: (0.346410161514 Ã— 1000 Ã— 7.85) / 1000 = 2.719 Ñ‚

const test1 = testShestigrannik(
  'Ğ¢Ğ•Ğ¡Ğ¢ 1: Ğ Ğ°Ğ·Ğ¼ĞµÑ€ 20, Ğ´Ğ»Ğ¸Ğ½Ğ° 1000 Ğ¼, ÑÑ‚Ğ°Ğ»ÑŒ ÑÑ‚3',
  '20',
  1000,
  'ÑÑ‚3',
  {
    weight: 2.72  // 2.719319767985 Ğ¾ĞºÑ€ÑƒĞ³Ğ»ÑĞµÑ‚ÑÑ Ğ´Ğ¾ 2.72
  }
);

// ============================================================================
// Ğ¢Ğ•Ğ¡Ğ¢ 2: Ğ Ğ°Ğ·Ğ¼ĞµÑ€ 10, ÑÑ‚Ğ°Ğ»ÑŒ ÑÑ‚3
// ============================================================================
// ĞšĞ¾ÑÑ„Ñ„Ğ¸Ñ†Ğ¸ĞµĞ½Ñ‚: 0.086602540378
// ĞŸĞ»Ğ¾Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ ÑÑ‚Ğ°Ğ»Ğ¸ ÑÑ‚3: 7.85
// Ğ Ğ°ÑÑ‡Ñ‘Ñ‚: (0.086602540378 Ã— 500 Ã— 7.85) / 1000 = 0.340 Ñ‚

const test2 = testShestigrannik(
  'Ğ¢Ğ•Ğ¡Ğ¢ 2: Ğ Ğ°Ğ·Ğ¼ĞµÑ€ 10, Ğ´Ğ»Ğ¸Ğ½Ğ° 500 Ğ¼, ÑÑ‚Ğ°Ğ»ÑŒ ÑÑ‚3',
  '10',
  500,
  'ÑÑ‚3',
  {
    weight: 0.34  // 0.339929993983 Ğ¾ĞºÑ€ÑƒĞ³Ğ»ÑĞµÑ‚ÑÑ Ğ´Ğ¾ 0.34
  }
);

// ============================================================================
// Ğ¢Ğ•Ğ¡Ğ¢ 3: Ğ Ğ°Ğ·Ğ¼ĞµÑ€ 30, ÑÑ‚Ğ°Ğ»ÑŒ Ğ 18
// ============================================================================
// ĞšĞ¾ÑÑ„Ñ„Ğ¸Ñ†Ğ¸ĞµĞ½Ñ‚: 0.779422863406
// ĞŸĞ»Ğ¾Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ ÑÑ‚Ğ°Ğ»Ğ¸ Ğ 18: 8.8
// Ğ Ğ°ÑÑ‡Ñ‘Ñ‚: (0.779422863406 Ã— 250 Ã— 8.8) / 1000 = 1.715 Ñ‚

const test3 = testShestigrannik(
  'Ğ¢Ğ•Ğ¡Ğ¢ 3: Ğ Ğ°Ğ·Ğ¼ĞµÑ€ 30, Ğ´Ğ»Ğ¸Ğ½Ğ° 250 Ğ¼, ÑÑ‚Ğ°Ğ»ÑŒ Ğ 18',
  '30',
  250,
  'Ğ 18',
  {
    weight: 1.71  // 1.714730299795 Ğ¾ĞºÑ€ÑƒĞ³Ğ»ÑĞµÑ‚ÑÑ Ğ´Ğ¾ 1.71
  }
);

// ============================================================================
// Ğ¢Ğ•Ğ¡Ğ¢ 4: Ğ Ğ°Ğ·Ğ¼ĞµÑ€ 50, ÑÑ‚Ğ°Ğ»ÑŒ 12Ğ¥Ğ2
// ============================================================================
// ĞšĞ¾ÑÑ„Ñ„Ğ¸Ñ†Ğ¸ĞµĞ½Ñ‚: 2.165063509461
// ĞŸĞ»Ğ¾Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ ÑÑ‚Ğ°Ğ»Ğ¸ 12Ğ¥Ğ2: 7.88
// Ğ Ğ°ÑÑ‡Ñ‘Ñ‚: (2.165063509461 Ã— 100 Ã— 7.88) / 1000 = 1.706 Ñ‚

const test4 = testShestigrannik(
  'Ğ¢Ğ•Ğ¡Ğ¢ 4: Ğ Ğ°Ğ·Ğ¼ĞµÑ€ 50, Ğ´Ğ»Ğ¸Ğ½Ğ° 100 Ğ¼, ÑÑ‚Ğ°Ğ»ÑŒ 12Ğ¥Ğ2',
  '50',
  100,
  '12Ğ¥Ğ2',
  {
    weight: 1.71  // 1.706070045455 Ğ¾ĞºÑ€ÑƒĞ³Ğ»ÑĞµÑ‚ÑÑ Ğ´Ğ¾ 1.71
  }
);

// ============================================================================
// Ğ¢Ğ•Ğ¡Ğ¢ 5: Ğ Ğ°Ğ·Ğ¼ĞµÑ€ 75, ÑÑ‚Ğ°Ğ»ÑŒ 50Ğ“2
// ============================================================================
// ĞšĞ¾ÑÑ„Ñ„Ğ¸Ñ†Ğ¸ĞµĞ½Ñ‚: 4.871392896288
// ĞŸĞ»Ğ¾Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ ÑÑ‚Ğ°Ğ»Ğ¸ 50Ğ“2: 7.5
// Ğ Ğ°ÑÑ‡Ñ‘Ñ‚: (4.871392896288 Ã— 50 Ã— 7.5) / 1000 = 1.827 Ñ‚

const test5 = testShestigrannik(
  'Ğ¢Ğ•Ğ¡Ğ¢ 5: Ğ Ğ°Ğ·Ğ¼ĞµÑ€ 75, Ğ´Ğ»Ğ¸Ğ½Ğ° 50 Ğ¼, ÑÑ‚Ğ°Ğ»ÑŒ 50Ğ“2',
  '75',
  50,
  '50Ğ“2',
  {
    weight: 1.83  // 1.826772336108 Ğ¾ĞºÑ€ÑƒĞ³Ğ»ÑĞµÑ‚ÑÑ Ğ´Ğ¾ 1.83
  }
);

// ============================================================================
// Ğ˜Ğ¢ĞĞ“Ğ˜
// ============================================================================

console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
console.log('ğŸ“Š Ğ˜Ğ¢ĞĞ“Ğ˜ Ğ¢Ğ•Ğ¡Ğ¢Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ¯');
console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n');

const allPassed = test1 && test2 && test3 && test4 && test5;

if (allPassed) {
  console.log('âœ… Ğ’Ğ¡Ğ• Ğ¢Ğ•Ğ¡Ğ¢Ğ« ĞŸĞ ĞĞ™Ğ”Ğ•ĞĞ« Ğ£Ğ¡ĞŸĞ•Ğ¨ĞĞ!\n');
  console.log('ğŸ‰ Ğ¨ĞµÑÑ‚Ğ¸Ğ³Ñ€Ğ°Ğ½Ğ½Ğ¸Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾:');
  console.log('   1. Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚: Ğ²ĞµÑ = (ĞºĞ¾ÑÑ„Ñ„Ğ¸Ñ†Ğ¸ĞµĞ½Ñ‚ Ã— Ğ´Ğ»Ğ¸Ğ½Ğ° Ã— Ğ¿Ğ»Ğ¾Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ_ÑÑ‚Ğ°Ğ»Ğ¸) / 1000');
  console.log('   2. ĞœĞ°Ñ€ĞºĞ¸ ÑÑ‚Ğ°Ğ»Ğ¸ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ÑÑÑ‚ÑÑ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾');
  console.log('   3. ĞŸĞ»Ğ¾Ñ‚Ğ½Ğ¾ÑÑ‚Ğ¸ ÑÑ‚Ğ°Ğ»Ğ¸ ÑƒÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾');
  console.log('   4. Ğ’ÑĞµ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ñ‹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‚ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾ (Ğ¾Ñ‚ Ğ¼Ğ°Ğ»Ñ‹Ñ… Ğ´Ğ¾ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ…)');
  console.log('   5. Ğ¡ Ã— Ğ¿Ğ»Ğ¾Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ_ÑÑ‚Ğ°Ğ»Ğ¸! (Ğ½Ğµ Ğ¿ÑƒÑ‚Ğ°Ñ‚ÑŒ ÑĞ¾ Ğ¨Ğ²ĞµĞ»Ğ»ĞµÑ€Ğ¾Ğ¼!)');
  console.log('\nğŸ“Š Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°:');
  console.log('   Ğ Ğ°Ğ·Ğ¼ĞµÑ€Ğ¾Ğ² Ğ² Ğ±Ğ°Ğ·Ğµ: 42');
  console.log('   ĞœĞ°Ñ€Ğ¾Ğº ÑÑ‚Ğ°Ğ»Ğ¸: 137');
  console.log('   Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ°: shestigrannik_steel_density');
  console.log('   Ğ“ĞĞ¡Ğ¢: Ğ“ĞĞ¡Ğ¢Ñ‹ Ğ¸ Ğ¢Ğ£ Ğ½Ğ° ÑˆĞµÑÑ‚Ğ¸Ğ³Ñ€Ğ°Ğ½Ğ½Ğ¸Ğº');
} else {
  console.log('âŒ ĞĞ•ĞšĞĞ¢ĞĞ Ğ«Ğ• Ğ¢Ğ•Ğ¡Ğ¢Ğ« ĞĞ• ĞŸĞ ĞĞ¨Ğ›Ğ˜!\n');
  console.log(`Ğ¢ĞµÑÑ‚ 1 (20, ÑÑ‚3): ${test1 ? 'âœ…' : 'âŒ'}`);
  console.log(`Ğ¢ĞµÑÑ‚ 2 (10, ÑÑ‚3): ${test2 ? 'âœ…' : 'âŒ'}`);
  console.log(`Ğ¢ĞµÑÑ‚ 3 (30, Ğ 18): ${test3 ? 'âœ…' : 'âŒ'}`);
  console.log(`Ğ¢ĞµÑÑ‚ 4 (50, 12Ğ¥Ğ2): ${test4 ? 'âœ…' : 'âŒ'}`);
  console.log(`Ğ¢ĞµÑÑ‚ 5 (75, 50Ğ“2): ${test5 ? 'âœ…' : 'âŒ'}`);
}

console.log('\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
